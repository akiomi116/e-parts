PoCæ§‹æˆï¼ˆFlask + SQLite + Bootstrapï¼‰
1. æ©Ÿèƒ½ç¯„å›²
	â€¢ CSVã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ â†’ bom_lines ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
	â€¢ BOMãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤ºï¼ˆBootstrapã®ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
	â€¢ SVGè¡¨ç¤ºï¼ˆå›è·¯å›³ or åŸºæ¿ã€ã‚¿ãƒ–åˆ‡æ›¿ï¼‰
	â€¢ åŒæ–¹å‘ãƒã‚¤ãƒ©ã‚¤ãƒˆï¼ˆBOMè¡Œã¨SVGè¦ç´ ã‚’Referenceã§åŒæœŸï¼‰
ğŸ‘‰ åœ¨åº«ç®¡ç†ã‚„ä¸è¶³ãƒªã‚¹ãƒˆã¯PoCå¯¾è±¡å¤–ï¼ˆå¾Œã§è¿½åŠ ï¼‰ã€‚

2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆSQLiteï¼‰
æœ€å°é™ã®1ãƒ†ãƒ¼ãƒ–ãƒ«ï¼š
CREATE TABLE bom_lines (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    reference TEXT,
    value TEXT,
    footprint TEXT,
    mpn TEXT,
    quantity INTEGER
);

3. Flaskãƒ«ãƒ¼ãƒˆæ§‹æˆ
@app.route("/")
def index():
    return render_template("index.html")
@app.route("/upload_bom", methods=["POST"])
def upload_bom():
    file = request.files["file"]
    df = pd.read_csv(file)
    for _, row in df.iterrows():
        db.session.add(BomLine(
            reference=row["Reference"],
            value=row["Value"],
            footprint=row["Footprint"],
            mpn=row.get("MPN"),
            quantity=row["Quantity"]
        ))
    db.session.commit()
    return redirect(url_for("bom"))
@app.route("/bom")
def bom():
    lines = BomLine.query.all()
    return render_template("bom.html", lines=lines)

4. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹æˆï¼ˆBootstrapï¼‰
templates/bom.html
	â€¢ å·¦ã‚«ãƒ©ãƒ : BOMãƒ†ãƒ¼ãƒ–ãƒ«
	â€¢ å³ã‚«ãƒ©ãƒ : ã‚¿ãƒ–UIï¼ˆå›è·¯å›³SVG / PCB SVGï¼‰
<div class="row">
  <!-- å·¦ï¼šBOM -->
  <div class="col-4">
    <table id="bom-table" class="table table-striped">
      <thead>
        <tr><th>Ref</th><th>Value</th><th>Footprint</th><th>MPN</th><th>Qty</th></tr>
      </thead>
      <tbody>
        {% for line in lines %}
        <tr data-ref="{{ line.reference }}">
          <td>{{ line.reference }}</td>
          <td>{{ line.value }}</td>
          <td>{{ line.footprint }}</td>
          <td>{{ line.mpn }}</td>
          <td>{{ line.quantity }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
<!-- å³ï¼šã‚¿ãƒ–åˆ‡æ›¿ -->
  <div class="col-8">
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#schematic">å›è·¯å›³</button>
      </li>
      <li class="nav-item">
        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#pcb">åŸºæ¿å›³</button>
      </li>
    </ul>
    <div class="tab-content border">
      <div class="tab-pane fade show active" id="schematic">
        <object id="schematic-svg" type="image/svg+xml" data="{{ url_for('static', filename='sample_schematic.svg') }}"></object>
      </div>
      <div class="tab-pane fade" id="pcb">
        <object id="pcb-svg" type="image/svg+xml" data="{{ url_for('static', filename='sample_pcb.svg') }}"></object>
      </div>
    </div>
  </div>
</div>

5. JSã«ã‚ˆã‚‹åŒæ–¹å‘ãƒã‚¤ãƒ©ã‚¤ãƒˆ
function highlightByRef(ref) {
  // BOMãƒ†ãƒ¼ãƒ–ãƒ«
  document.querySelectorAll("#bom-table tr").forEach(row => {
    row.classList.toggle("highlight", row.dataset.ref === ref);
  });
// å›è·¯å›³SVG
  const schematicDoc = document.getElementById("schematic-svg").contentDocument;
  schematicDoc.querySelectorAll("text").forEach(el => {
    el.classList.toggle("svg-highlight", el.textContent.trim() === ref);
  });
// PCB SVG
  const pcbDoc = document.getElementById("pcb-svg").contentDocument;
  pcbDoc.querySelectorAll("text").forEach(el => {
    el.classList.toggle("svg-highlight", el.textContent.trim() === ref);
  });
}
// BOMã‚¯ãƒªãƒƒã‚¯
document.querySelectorAll("#bom-table tr").forEach(row => {
  row.addEventListener("click", () => highlightByRef(row.dataset.ref));
});

6. CSSä¾‹
.highlight { background-color: yellow; }
.svg-highlight { fill: red; font-weight: bold; }

7. ã“ã®PoCã§ç¢ºèªã§ãã‚‹ã“ã¨
	1. BOM CSVã‚’å–ã‚Šè¾¼ã¿ã€DBã«ä¿å­˜ï¼†è¡¨ç¤ºã§ãã‚‹
	2. å›è·¯å›³SVGãƒ»PCB SVGã‚’ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã§è¡¨ç¤ºã§ãã‚‹
	3. BOMã‚¯ãƒªãƒƒã‚¯ã§SVGå†…ã®éƒ¨å“ãŒå¼·èª¿ã•ã‚Œã‚‹ï¼ˆé€†ã‚‚å¯èƒ½ã«ã™ã‚‹ï¼‰
	4. å®Ÿéš›ã®KiCadãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å‡ºåŠ›ã—ãŸCSV & SVGã§æ¤œè¨¼ã§ãã‚‹


ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ç½®ï¼ˆä¾‹ï¼‰
poc_app/
â”œâ”€ app.py                 # Flaskæœ¬ä½“
â”œâ”€ requirements.txt       # ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
â”œâ”€ instance/
â”‚   â””â”€ app.db             # SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ï¼‰
â”œâ”€ static/
â”‚   â”œâ”€ sample_bom.csv     # KiCadã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®BOM CSV
â”‚   â”œâ”€ sample_schematic.svg  # å›è·¯å›³SVG
â”‚   â””â”€ sample_pcb.svg        # PCB SVG
â””â”€ templates/
    â”œâ”€ index.html         # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸
    â””â”€ bom.html           # BOM + SVGãƒ“ãƒ¥ãƒ¼ã‚¢ç”»é¢

ğŸ“¦ requirements.txt
flask
flask_sqlalchemy
pandas
ï¼ˆBootstrapã¯CDNã§èª­ã¿è¾¼ã¿ã¾ã™ï¼‰

ğŸ app.pyï¼ˆFlaskæœ¬ä½“ï¼‰
import os
import pandas as pd
from flask import Flask, render_template, request, redirect, url_for
from flask_sqlalchemy import SQLAlchemy
app = Flask(__name__)
app.config["SQLALCHEMY_DATABASE_URI"] = "sqlite:///app.db"
app.config["SQLALCHEMY_TRACK_MODIFICATIONS"] = False
db = SQLAlchemy(app)
# --- ãƒ¢ãƒ‡ãƒ«å®šç¾© ---
class BomLine(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    reference = db.Column(db.String(50))
    value = db.Column(db.String(100))
    footprint = db.Column(db.String(100))
    mpn = db.Column(db.String(100))
    quantity = db.Column(db.Integer)
# --- åˆæœŸåŒ– ---
@app.before_first_request
def setup():
    db.create_all()
# --- ãƒ«ãƒ¼ãƒˆ ---
@app.route("/")
def index():
    return render_template("index.html")
@app.route("/upload_bom", methods=["POST"])
def upload_bom():
    file = request.files["file"]
    if not file:
        return redirect(url_for("index"))
    df = pd.read_csv(file)
    for _, row in df.iterrows():
        db.session.add(BomLine(
            reference=row.get("Reference"),
            value=row.get("Value"),
            footprint=row.get("Footprint"),
            mpn=row.get("MPN"),
            quantity=row.get("Quantity", 1)
        ))
    db.session.commit()
    return redirect(url_for("bom"))
@app.route("/bom")
def bom():
    lines = BomLine.query.all()
    return render_template("bom.html", lines=lines)
if __name__ == "__main__":
    app.run(debug=True)

ğŸ–¥ï¸ templates/index.html
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>PoC - CSVã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-3">
  <h1>PoC: KiCad BOM + SVG ãƒ“ãƒ¥ãƒ¼ã‚¢</h1>
  <form action="{{ url_for('upload_bom') }}" method="post" enctype="multipart/form-data">
    <div class="mb-3">
      <label class="form-label">BOM CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</label>
      <input type="file" name="file" class="form-control">
    </div>
    <button type="submit" class="btn btn-primary">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</button>
  </form>
</body>
</html>

ğŸ–¥ï¸ templates/bom.html
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>BOMãƒ“ãƒ¥ãƒ¼ã‚¢</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .highlight { background-color: yellow; }
    .svg-highlight { fill: red; font-weight: bold; }
  </style>
</head>
<body class="p-3">
  <h1>BOM + å›è·¯å›³ / PCB ãƒ“ãƒ¥ãƒ¼ã‚¢</h1>
  <div class="row">
    <!-- å·¦ãƒšã‚¤ãƒ³ï¼šBOMãƒ†ãƒ¼ãƒ–ãƒ« -->
    <div class="col-4">
      <table id="bom-table" class="table table-striped">
        <thead>
          <tr><th>Ref</th><th>Value</th><th>Footprint</th><th>MPN</th><th>Qty</th></tr>
        </thead>
        <tbody>
          {% for line in lines %}
          <tr data-ref="{{ line.reference }}">
            <td>{{ line.reference }}</td>
            <td>{{ line.value }}</td>
            <td>{{ line.footprint }}</td>
            <td>{{ line.mpn }}</td>
            <td>{{ line.quantity }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
<!-- å³ãƒšã‚¤ãƒ³ï¼šã‚¿ãƒ–åˆ‡æ›¿ -->
    <div class="col-8">
      <ul class="nav nav-tabs">
        <li class="nav-item">
          <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#schematic">å›è·¯å›³</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" data-bs-target="#pcb">åŸºæ¿å›³</button>
        </li>
      </ul>
      <div class="tab-content border" style="height:80vh; overflow:auto;">
        <div class="tab-pane fade show active" id="schematic">
          <object id="schematic-svg" type="image/svg+xml"
                  data="{{ url_for('static', filename='sample_schematic.svg') }}"
                  style="width:100%; height:100%;"></object>
        </div>
        <div class="tab-pane fade" id="pcb">
          <object id="pcb-svg" type="image/svg+xml"
                  data="{{ url_for('static', filename='sample_pcb.svg') }}"
                  style="width:100%; height:100%;"></object>
        </div>
      </div>
    </div>
  </div>
<script>
    function highlightByRef(ref) {
      // BOMè¡Œ
      document.querySelectorAll("#bom-table tr").forEach(row => {
        row.classList.toggle("highlight", row.dataset.ref === ref);
      });
// å›è·¯å›³
      const schematicDoc = document.getElementById("schematic-svg").contentDocument;
      if (schematicDoc) {
        schematicDoc.querySelectorAll("text").forEach(el => {
          el.classList.toggle("svg-highlight", el.textContent.trim() === ref);
        });
      }
// PCB
      const pcbDoc = document.getElementById("pcb-svg").contentDocument;
      if (pcbDoc) {
        pcbDoc.querySelectorAll("text").forEach(el => {
          el.classList.toggle("svg-highlight", el.textContent.trim() === ref);
        });
      }
    }
// BOMã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
    document.querySelectorAll("#bom-table tr").forEach(row => {
      row.addEventListener("click", () => highlightByRef(row.dataset.ref));
    });
  </script>
</body>
</html>

âœ… å®Ÿè¡Œæ–¹æ³•
cd poc_app
python -m venv venv
source venv/bin/activate  # Windowsã¯ venv\Scripts\activate
pip install -r requirements.txt
python app.py
ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://127.0.0.1:5000 ã‚’é–‹ãã¨åˆ©ç”¨ã§ãã¾ã™ã€‚
